<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no"/>
		<meta name="renderer" content="webkit"/>
		<meta name="force-rendering" content="webkit"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<meta name="description" content="不想沉默开源镜像站">
		<meta name="keywords" content="镜像站,镜像源,Linux,软件源,开源">
		<link rel="stylesheet" href="css/mdui.min.css" />
		<title></title>
		<style type="text/css">
			body,html{
				background-color: #e9e9e9;
			}
			.status-panel{
				height: 25px;
				background-color: #ffffff;
				margin: 15px;
				padding: 10px;
				margin-bottom: 0;
			}
			.status-panel3,.status-panel4{
				margin-bottom: 15px;
			}
			.status-panel2{
				height: 200px;
			}
			.status-panel2 .title{
				border-width: 0 0 1px 0;
				border-style: solid;
				border-color: #000000;
			}
			.status-panel2 .progress{
				display: inline-block;
				width: 100px;
				height: 100px;
				border-radius: 50%;
				border-width: 1px;
				border-style: solid;
				border-color: #2196F3;
				overflow: hidden;
			}
			.status-panel2 .content{
				padding: 40px;
			}
			.status-panel2 .progress h2{
			    width: 42px;
				margin-top: 35px;
				position: absolute;
				left: 50%;
				margin-left: -22px;
				z-index: 1;
			}
			.status-panel2 .progress .square{
				display: inline-block;
				margin-top: 0px;
				width: 150px;
				height: 150px;
				background-color: #448AFF;
				border-radius: 40%;
				animation: rotate 10s linear infinite;
				margin-left: -20px;
				-webkit-transition: all 0.5s;
				transition: all 0.5s;
			}
			@keyframes rotate{
			    from{transform: rotate(0deg)}
			    to{transform: rotate(360deg)}
			}
			.status-panel3{
				height: 400px;
			}
			.status-panel3 .titles{
				border-width: 0 0 1px 0;
				border-style: solid;
				border-color: #000000;
			}
			.status-panel3 .disk{
				display:block;
				width: 100%;
				height: 50%;
				border-width: 1px;
				border-style: solid;
				border-color: #2196F3;
				margin-top: 75px;
				overflow: hidden;
			}
			.status-panel3 .progress-rate{
				display: block;
				width: 0;
				height: 100%;
				background-color: #2196F3;
				-webkit-transition: all 0.5s;
				transition: all 0.5s;
			}
		</style>
	</head>
	<body>
		<div class="mdui-container-fluid">
			<div class="mdui-row mdui-row-gapless">
				<div class="mdui-col-md-12">
					<div class="status-panel mdui-text-center">
						<span><i class="mdui-icon material-icons">computer</i>:<span class="system"></span>&nbsp;</span>
						<span><i class="mdui-icon material-icons">access_time</i>:<span class="time"></span></span>
					</div>
				</div>
			</div>
			<div class="mdui-row mdui-row-gapless">
				<div class="mdui-col-md-12">
					<div class="status-panel mdui-text-center status-panel2">
						<div class="title">状态</div>
						<div class="mdui-row mdui-row-gapless content">
							<div class="mdui-col-sm-4 mdui-col-xs-6">
								<span class="progress">
									<h2 class="R">0%</h2>
									<span class="square"></span>
								</span>
								<h3>内存</h3>
							</div>
							<div class="mdui-col-sm-4 mdui-col-xs-6">
								<span class="progress">
									<h2 class="C">0%</h2>
									<span class="square"></span>
								</span>
								<h3>CPU</h3>
							</div>
							<div class="mdui-col-sm-4 mdui-hidden-xs-down">
								<span class="progress">
									<h2 class="L">0%</h2>
									<span class="square"></span>
								</span>
								<h3>负载</h3>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="mdui-row mdui-row-gapless">
				<div class="mdui-col-md-12">
					<div class="status-panel mdui-text-center status-panel3">
						<div class="titles">磁盘状态</div>
						<span class="disk">
							<span class="progress-rate"></span>
						</span>
						<h2 class="used">0GB</h2>
						<h2 class="total">0GB</h2>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
<script src="js/mdui.min.js"></script>
<script>
	var xmlhttp=new XMLHttpRequest();
	var xmlhttps=new XMLHttpRequest();
	var xmlhttpss=new XMLHttpRequest();
	var xmlhttpsss=new XMLHttpRequest();
	var xmlhttpssss=new XMLHttpRequest();
	var xmlhttp5=new XMLHttpRequest();
	var xmlhttp6=new XMLHttpRequest();
	var square=document.getElementsByClassName("square");
	var R=document.getElementsByClassName("R")[0];
	var C=document.getElementsByClassName("C")[0];
	var L=document.getElementsByClassName("L")[0];
	var system=document.getElementsByClassName("system")[0];
	var time=document.getElementsByClassName("time")[0];
	var used=document.getElementsByClassName("used")[0];
	var total=document.getElementsByClassName("total")[0];
	var progress_srate=document.getElementsByClassName("progress-rate")[0];
	function disk_total(){
		xmlhttp6.onreadystatechange=function(){
			if(xmlhttp6.readyState==4 && xmlhttp5.status==200){
				var totals=xmlhttp6.responseText;
				total.innerText="总空间:"+totals;
			}
		}
		xmlhttp6.open("GET","disk_total.php",true);
		xmlhttp6.send();
	}
	setInterval("disk_total()",1000);
	function disk_used(){
		xmlhttp5.onreadystatechange=function(){
			if(xmlhttp5.readyState==4 && xmlhttp5.status==200){
				var useds=xmlhttp5.responseText;
				useds=useds.split(" ");
				used.innerText="已使用:"+useds[0]+useds[3];
				progress_srate.style.width=Math.floor((useds[2]/useds[1])*100)+"%";
			}
		}
		xmlhttp5.open("GET","disk_used.php",true);
		xmlhttp5.send();
	}
	setInterval("disk_used()",1000);
	function LOAD(){
		xmlhttpssss.onreadystatechange=function(){
			if(xmlhttpssss.readyState==4 && xmlhttpssss.status==200){
				var load=xmlhttpssss.responseText;
				L.innerText=load+"%";
				square[2].style.marginTop=(100-load)+"px";
			}
		}
		xmlhttpssss.open("GET","load.php",true);
		xmlhttpssss.send();
	}
	setInterval("LOAD()",1000);
	function RAM(){
		xmlhttp.onreadystatechange=function(){
			if(xmlhttp.readyState==4 && xmlhttp.status==200){
				var rams=xmlhttp.responseText;
				R.innerText=rams+"%";
				square[0].style.marginTop=(100-rams)+"px";
			}
		}
		xmlhttp.open("GET","ram.php",true);
		xmlhttp.send();
	}
	setInterval("RAM()",1000);
	function CPU(){
		xmlhttpsss.onreadystatechange=function(){
			if(xmlhttpsss.readyState==4 && xmlhttpsss.status==200){
				var cpu=xmlhttpsss.responseText;
				C.innerText=(100-cpu)+"%";
				square[1].style.marginTop=cpu+"px";
			}
		}
		xmlhttpsss.open("GET","cpu.php",true);
		xmlhttpsss.send();
	}
	setInterval("CPU()",1000);
	function SYSTEM(){
		xmlhttps.onreadystatechange=function(){
			if(xmlhttpss.readyState==4 && xmlhttpss.status==200){
				system.innerText=xmlhttps.responseText;
			}
		}
		xmlhttps.open("GET","system.php",true);
		xmlhttps.send();
	}
	function date(){
		xmlhttpss.onreadystatechange=function(){
			if(xmlhttpss.readyState==4 && xmlhttpss.status==200){
				time.innerText=xmlhttpss.responseText;
			}
		}
		xmlhttpss.open("GET","date.php",true);
		xmlhttpss.send();
	}
	date();
	SYSTEM();
</script>